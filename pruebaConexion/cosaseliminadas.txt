perfil: cesta con tabla:

<?php
$usuario = unserialize($_SESSION['datos'])[2];
//select para sacar la id del pedido que tengas pediente que es el que no esta realizado aun
$sqlPedidoPendiente = "SELECT p.idPedido, u.idUsuario FROM pedido p, usuario u where p.idEstado = 1 AND p.idUsuario = u.idUsuario and u.idUsuario = $usuario";
$regPedido = $bd->query($sqlPedidoPendiente);
//comprobamos si tiene algun pedido pendiente si lo tiene lo mostrammos y si no te dice que no tienes productos
if($regPedido->num_rows) {
    $rowP = mysqli_fetch_assoc($regPedido);
    $idPedido = $rowP["idPedido"];
    //select para sacar los productos que tienes en esa supuesta cesta
    $sqlProductos = "SELECT * FROM `relacionpedido` WHERE idPedido = $idPedido";
    $regProductos = $bd->query($sqlProductos);

    while($rowPedidos = mysqli_fetch_assoc($regProductos)){
        $idProducto = $rowPedidos["idProducto"];
        //Sacar el nombre del producto por que no me sale el join para sacarlo directo...
        $sqlNombre = "SELECT j.nombreJuego, vj.precio FROM versionjuego vj, videojuego j WHERE vj.idVersion = $idProducto AND j.idJuego = vj.idJuego";
        $regNombre = $bd->query($sqlNombre);
        $rowN = mysqli_fetch_assoc($regNombre);
        ?>
        <li><a><?=$rowN["nombreJuego"]?> - <?=$rowN["precio"]?>â‚¬</a></li>
        <?php }
    } else {
        if($_SESSION["rol"] == "admin"){
            echo "<li><a>No cobras lo suficiente >w<</a></li>";
        } else {
            echo "<li><a>no tiene ningun producto</a><li>";
        }
    }
$bd->close();

?>
